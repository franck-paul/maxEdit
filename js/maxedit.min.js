"use strict";jQuery.fn.style=function(t,e,o=""){const s=this.get(0);if(void 0===s)return;const{style:r}=this.get(0);return void 0===t?r:void 0===e?r.getPropertyValue(t):void r.setProperty(t,e,o)},$((()=>{const t={mode:!1,vars:dotclear.getData("maxedit")},e=e=>{t.mode?(e=>{t.mode&&(t.elt.bottom.each(((t,e)=>{s(e)})),t.elt.source.each(((t,e)=>{s(e)})),t.elt.content.each(((t,e)=>{s(e)})),void 0!==t.elt.iframe&&t.elt.iframe.each(((t,e)=>{s(e)})),void 0!==t.elt.switcher&&t.elt.switcher.each(((t,e)=>{s(e)})),t.elt.top.each(((t,e)=>{s(e)})),t.elt.wrapper.each(((t,e)=>{s(e)})),t.elt.parents.each(((t,e)=>{s(e)})),$(window).scrollTop(t.scrollPosition),$(e.toolbar).children("button.jstb_maxEdit").attr("title",t.vars.show).css("background-image",`url(${t.vars.icon_on})`),t.mode=!1)})(e):(e=>{t.mode||(t.elt={wrapper:$(e.editor).parent(),top:$("> label",$(e.editor).parent()),content:$(e.editor),bottom:$(e.toolbar),parents:$(e.editor).parent().parents(),source:$(e.textarea),iframe:$(e.iframe),switcher:$(e.switcher)},t.scrollPosition=$(window).scrollTop(),$(window).scrollTop(0),t.elt.parents.each(((t,e)=>{o(e)})),t.elt.parents.css("position","static").css("overflow","visible").css("z-index",9999),$("body","html").css("overflow","hidden").css("width","0").css("height","0"),t.elt.wrapper.each(((t,e)=>{o(e)})),t.elt.wrapper.css("margin-bottom",0).css("position","absolute").css("z-index",9999).css("left",0).css("top",0).style("width","100vw","important"),t.elt.top.each(((t,e)=>{o(e)})),t.elt.top.css("display","none"),void 0!==t.elt.switcher&&(t.elt.switcher.each(((t,e)=>{o(e)})),t.elt.switcher.css("display","none")),t.toolbarHeight=t.elt.bottom.outerHeight(!0),t.elt.content.each(((t,e)=>{o(e)})),t.elt.content.css("height",`calc(100vh - ${t.toolbarHeight}px)`),void 0!==t.elt.iframe&&(t.elt.iframe.each(((t,e)=>{o(e)})),t.elt.iframe.css("height",`calc(100vh - ${t.toolbarHeight}px)`)),t.elt.source.each(((t,e)=>{o(e)})),t.elt.source.css("height","100%").css("border","none").css("padding","2.5em").css("box-shadow","none").css("resize","none").css("max-width","80em").css("margin","0 auto").css("font-size","larger"),t.elt.bottom.each(((t,e)=>{o(e)})),t.elt.bottom.css("border-radius","0").css("background","currentColor"),$(e.toolbar).children("button.jstb_maxEdit").attr("title",t.vars.hide).css("background-image",`url(${t.vars.icon_off})`),t.mode=!0)})(e)},o=t=>{const e=$(t).attr("style");void 0!==e&&$(t).data("maxedit",e)},s=t=>{const e=$(t).data("maxedit");void 0===e?$(t).removeAttr("style"):$(t).attr("style",e)};jsToolBar.prototype.elements.maxEditSpace={type:"space",format:{wysiwyg:!0,wiki:!0,xhtml:!0,markdown:!0}},jsToolBar.prototype.elements.maxEdit={type:"button",title:"Max",shortkey:"KeyF",shortkey_name:"F",fn:{}},jsToolBar.prototype.elements.maxEdit.title=t.vars.show,jsToolBar.prototype.elements.maxEdit.icon=t.vars.icon_on,jsToolBar.prototype.elements.maxEdit.fn.wiki=function(){e(this)},jsToolBar.prototype.elements.maxEdit.fn.xhtml=function(){e(this)},jsToolBar.prototype.elements.maxEdit.fn.wysiwyg=function(){e(this)},jsToolBar.prototype.elements.maxEdit.fn.markdown=function(){e(this)},t.mode=!1,jsToolBar.prototype.elements.maxEdit.context=t.vars.context,$(window).on("resize",(()=>{if(t.mode){const e=t.elt.bottom.outerHeight(!0);e!==t.toolbarHeight&&(t.toolbarHeight=e,t.elt.content.css("height",`calc(100vh - ${e}px)`),void 0!==t.elt.iframe&&t.elt.iframe.css("height",`calc(100vh - ${e}px)`))}}))}));
