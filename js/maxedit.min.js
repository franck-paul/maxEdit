"use strict";jQuery.fn.style=function(t,e,i=""){if(void 0===this.get(0))return;const{style:a}=this.get(0);return void 0===t?a:void 0===e?a.getPropertyValue(t):void a.setProperty(t,e,i)};const inMax=t=>{maxEdit.mode||(maxEdit.elt={wrapper:$(t.editor).parent(),top:$("> label",$(t.editor).parent()),content:$(t.editor),bottom:$(t.toolbar),parents:$(t.editor).parent().parents(),source:$(t.textarea),iframe:$(t.iframe),switcher:$(t.switcher)},maxEdit.scrollPosition=$(window).scrollTop(),$(window).scrollTop(0),maxEdit.elt.parents.each(((t,e)=>{saveStyleAttribute(e)})),maxEdit.elt.parents.css("position","static").css("overflow","visible").css("z-index",9999),$("body","html").css("overflow","hidden").css("width","0").css("height","0"),maxEdit.elt.wrapper.each(((t,e)=>{saveStyleAttribute(e)})),maxEdit.elt.wrapper.css("margin-bottom",0).css("position","absolute").css("z-index",9999).css("left",0).css("top",0).style("width","100vw","important"),maxEdit.elt.top.each(((t,e)=>{saveStyleAttribute(e)})),maxEdit.elt.top.css("display","none"),void 0!==maxEdit.elt.switcher&&(maxEdit.elt.switcher.each(((t,e)=>{saveStyleAttribute(e)})),maxEdit.elt.switcher.css("display","none")),maxEdit.toolbarHeight=maxEdit.elt.bottom.outerHeight(!0),maxEdit.elt.content.each(((t,e)=>{saveStyleAttribute(e)})),maxEdit.elt.content.css("height",`calc(100vh - ${maxEdit.toolbarHeight}px)`),void 0!==maxEdit.elt.iframe&&(maxEdit.elt.iframe.each(((t,e)=>{saveStyleAttribute(e)})),maxEdit.elt.iframe.css("height",`calc(100vh - ${maxEdit.toolbarHeight}px)`)),maxEdit.elt.source.each(((t,e)=>{saveStyleAttribute(e)})),maxEdit.elt.source.css("height","100%").css("border","none").css("padding","2.5em").css("box-shadow","none").css("resize","none").css("max-width","80em").css("margin","0 auto").css("font-size","larger"),maxEdit.elt.bottom.each(((t,e)=>{saveStyleAttribute(e)})),maxEdit.elt.bottom.css("border-radius","0").css("background","currentColor"),$(t.toolbar).children("button.jstb_maxEdit").attr("title",maxEdit.vars.hide).css("background-image","url(index.php?pf=maxEdit/img/max-off.svg)"),maxEdit.mode=!0)},outMax=t=>{maxEdit.mode&&(maxEdit.elt.bottom.each(((t,e)=>{restoreStyleAttribute(e)})),maxEdit.elt.source.each(((t,e)=>{restoreStyleAttribute(e)})),maxEdit.elt.content.each(((t,e)=>{restoreStyleAttribute(e)})),void 0!==maxEdit.elt.iframe&&maxEdit.elt.iframe.each(((t,e)=>{restoreStyleAttribute(e)})),void 0!==maxEdit.elt.switcher&&maxEdit.elt.switcher.each(((t,e)=>{restoreStyleAttribute(e)})),maxEdit.elt.top.each(((t,e)=>{restoreStyleAttribute(e)})),maxEdit.elt.wrapper.each(((t,e)=>{restoreStyleAttribute(e)})),maxEdit.elt.parents.each(((t,e)=>{restoreStyleAttribute(e)})),$(window).scrollTop(maxEdit.scrollPosition),$(t.toolbar).children("button.jstb_maxEdit").attr("title",maxEdit.vars.show).css("background-image","url(index.php?pf=maxEdit/img/max-on.svg)"),maxEdit.mode=!1)},switchMax=t=>{maxEdit.mode?outMax(t):inMax(t)},saveStyleAttribute=t=>{const e=$(t).attr("style");void 0!==e&&$(t).data("maxedit",e)},restoreStyleAttribute=t=>{const e=$(t).data("maxedit");void 0===e?$(t).removeAttr("style"):$(t).attr("style",e)},maxEdit={mode:!1,vars:dotclear.getData("maxedit")};jsToolBar.prototype.elements.maxEditSpace={type:"space",format:{wysiwyg:!0,wiki:!0,xhtml:!0,markdown:!0}},jsToolBar.prototype.elements.maxEdit={type:"button",title:"Max",shortkey:"KeyF",shortkey_name:"F",fn:{}},jsToolBar.prototype.elements.maxEdit.title=maxEdit.vars.show,jsToolBar.prototype.elements.maxEdit.icon="index.php?pf=maxEdit/img/max-on.svg",jsToolBar.prototype.elements.maxEdit.fn.wiki=function(){switchMax(this)},jsToolBar.prototype.elements.maxEdit.fn.xhtml=function(){switchMax(this)},jsToolBar.prototype.elements.maxEdit.fn.wysiwyg=function(){switchMax(this)},jsToolBar.prototype.elements.maxEdit.fn.markdown=function(){switchMax(this)},$((()=>{maxEdit.mode=!1,jsToolBar.prototype.elements.maxEdit.context=maxEdit.vars.context,$(window).on("resize",(()=>{if(maxEdit.mode){const t=maxEdit.elt.bottom.outerHeight(!0);t!==maxEdit.toolbarHeight&&(maxEdit.toolbarHeight=t,maxEdit.elt.content.css("height",`calc(100vh - ${t}px)`),void 0!==maxEdit.elt.iframe&&maxEdit.elt.iframe.css("height",`calc(100vh - ${t}px)`))}}))}));
